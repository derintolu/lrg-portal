/*!
Theme Name: Workspaces
Theme URI: https://frs.works
Description: Blocksy child theme for workspace portals with fixed sidebar navigation
Author: FRS Development Team
Author URI: https://frs.works
Template: blocksy
Version: 1.0.0
License: GNU General Public License v2 or later
License URI: https://www.gnu.org/licenses/gpl-2.0.html
Text Domain: workspaces
*/

/* React sidebar container styles */
#frs-react-sidebar {
    margin-bottom: 1.5rem;
}

/* WordPress widgets slot */
.frs-wp-widgets-slot {
    margin-top: 1rem;
}

/* Ensure proper spacing in Blocksy sidebar structure */
.ct-sidebar .frs-sidebar-wrapper {
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

/* ==========================================================================
   Sidebar Edge-to-Edge Fix
   Extends the sidebar container to reach viewport edge (left: 0 or right: 0)
   Uses CSS custom property for container max-width offset calculation
   ========================================================================== */

@media (min-width: 1000px) {
    /* Calculate the container offset (margin from viewport edge) */
    :root {
        /* Blocksy's container max-width - check Customizer > General > Container Width */
        --ct-container-max-width: 1478px;
        /* Offset = (viewport - max-width) / 2, but with min of 0 */
        --container-offset: max(0px, calc((100vw - var(--ct-container-max-width)) / 2));
    }

    /* Left sidebar: extend aside to viewport edge and widen content */
    [data-sidebar="left"] > aside {
        /* Pull to left edge */
        margin-left: calc(var(--container-offset) * -1) !important;
        /* Start at bottom of nav bar (no negative margin) */
        margin-top: 0 !important;
        /* Widen the aside to include the offset */
        width: calc(100% + var(--container-offset)) !important;
        /* Equal padding on all interior sides */
        padding: 20px !important;
    }

    /* Make sidebar content fill the wider aside */
    [data-sidebar="left"] > aside .ct-sidebar {
        width: 100% !important;
        max-width: none !important;
    }

    /* Override the React sidebar grid layout (ID selector for specificity) */
    [data-sidebar="left"] > aside #frs-react-sidebar {
        display: block !important;
        grid-template-columns: none !important;
    }

    /* Expand all widgets and content inside the sidebar */
    [data-sidebar="left"] > aside .ct-sidebar > *,
    [data-sidebar="left"] > aside .ct-widget,
    [data-sidebar="left"] > aside #frs-react-sidebar,
    [data-sidebar="left"] > aside #frs-react-sidebar > *,
    [data-sidebar="left"] > aside .frs-sidebar,
    [data-sidebar="left"] > aside .frs-sidebar > *,
    [data-sidebar="left"] > aside .frs-sidebar-section,
    [data-sidebar="left"] > aside .frs-profile-card {
        width: 100% !important;
        max-width: none !important;
        box-sizing: border-box !important;
    }

    /* Right sidebar: extend aside to viewport edge and widen content */
    [data-sidebar="right"] > aside {
        /* Pull to right edge */
        margin-right: calc(var(--container-offset) * -1) !important;
        /* Start at bottom of nav bar (no negative margin) */
        margin-top: 0 !important;
        /* Widen the aside to include the offset */
        width: calc(100% + var(--container-offset)) !important;
        /* Equal padding on all interior sides */
        padding: 20px !important;
    }

    /* Make sidebar content fill the wider aside */
    [data-sidebar="right"] > aside .ct-sidebar {
        width: 100% !important;
        max-width: none !important;
    }

    /* Override the React sidebar grid layout (ID selector for specificity) */
    [data-sidebar="right"] > aside #frs-react-sidebar {
        display: block !important;
        grid-template-columns: none !important;
    }

    /* Expand all widgets and content inside the sidebar */
    [data-sidebar="right"] > aside .ct-sidebar > *,
    [data-sidebar="right"] > aside .ct-widget,
    [data-sidebar="right"] > aside #frs-react-sidebar,
    [data-sidebar="right"] > aside #frs-react-sidebar > *,
    [data-sidebar="right"] > aside .frs-sidebar,
    [data-sidebar="right"] > aside .frs-sidebar > *,
    [data-sidebar="right"] > aside .frs-sidebar-section,
    [data-sidebar="right"] > aside .frs-profile-card {
        width: 100% !important;
        max-width: none !important;
        box-sizing: border-box !important;
    }

    /* Ensure parent containers don't clip the extended sidebar */
    [data-sidebar] {
        overflow: visible !important;
    }

    .ct-container {
        overflow: visible !important;
    }

    #main-container {
        overflow-x: clip !important;
    }

    /* ==========================================================================
       Sidebar Independent Scroll
       Sticky container with scrollable internal content
       ========================================================================== */

    /* Make the aside sticky but NOT scrollable itself */
    [data-sidebar="left"] > aside,
    [data-sidebar="right"] > aside {
        position: sticky !important;
        top: 0 !important;
        height: 100vh !important;
        max-height: 100vh !important;
        overflow: hidden !important;
        align-self: start !important;
    }

    /* Make the internal content scrollable - override Blocksy's sticky */
    /* Uses Blocksy's --header-sticky-height when sticky, --header-height otherwise */
    [data-sidebar="left"] > aside .ct-sidebar,
    [data-sidebar="right"] > aside .ct-sidebar {
        position: relative !important;
        top: auto !important;
        height: calc(100vh - var(--header-sticky-height, var(--header-height, 80px))) !important;
        max-height: calc(100vh - var(--header-sticky-height, var(--header-height, 80px))) !important;
        overflow-y: scroll !important;
        overflow-x: hidden !important;
        padding-bottom: 40px !important;
        overscroll-behavior: contain !important;
        -webkit-overflow-scrolling: touch !important;
    }

    /* Custom scrollbar styling for sidebar content - more visible */
    [data-sidebar="left"] > aside .ct-sidebar::-webkit-scrollbar,
    [data-sidebar="right"] > aside .ct-sidebar::-webkit-scrollbar {
        width: 8px;
    }

    [data-sidebar="left"] > aside .ct-sidebar::-webkit-scrollbar-track,
    [data-sidebar="right"] > aside .ct-sidebar::-webkit-scrollbar-track {
        background: rgba(0, 0, 0, 0.1);
        border-radius: 4px;
    }

    [data-sidebar="left"] > aside .ct-sidebar::-webkit-scrollbar-thumb,
    [data-sidebar="right"] > aside .ct-sidebar::-webkit-scrollbar-thumb {
        background: rgba(0, 0, 0, 0.3);
        border-radius: 4px;
    }

    [data-sidebar="left"] > aside .ct-sidebar::-webkit-scrollbar-thumb:hover,
    [data-sidebar="right"] > aside .ct-sidebar::-webkit-scrollbar-thumb:hover {
        background: rgba(0, 0, 0, 0.5);
    }

    /* Firefox scrollbar styling */
    [data-sidebar="left"] > aside .ct-sidebar,
    [data-sidebar="right"] > aside .ct-sidebar {
        scrollbar-width: auto;
        scrollbar-color: rgba(0, 0, 0, 0.3) rgba(0, 0, 0, 0.1);
    }
}

/* ==========================================================================
   Fluent Booking Dashboard Widgets - 21st Century Brand Gradients
   Overrides the default widget styles with brand colors
   ========================================================================== */

/* Brand Color Variables */
:root {
    /* Primary Colors */
    --21c-dark-charcoal: #171A1F;
    --21c-navy-base: #263042;
    --21c-steel-gray: #444B57;
    --21c-blue-gray: #405C7A;
    --21c-primary-blue: #2563EB;
    
    /* Accent Colors */
    --21c-rich-teal: #20D4DA;
    --21c-light-blue: #7DB3E8;
    --21c-blue-mist: #B6C7D9;
    --21c-lighter-blue: #C3D9F1;
    
    /* Gradients */
    --21c-primary-gradient: linear-gradient(90deg, #263042 0%, #2563EB 35%, #20D4DA 70%, #7DB3E8 100%);
    --21c-hero-gradient: linear-gradient(135deg, #2563EB 0%, #20D4DA 100%);
    --21c-subtle-gradient: linear-gradient(180deg, #F8F7F9 0%, #C3D9F1 100%);
    --21c-card-gradient-1: linear-gradient(135deg, #2563EB 0%, #20D4DA 100%);
    --21c-card-gradient-2: linear-gradient(135deg, #263042 0%, #405C7A 100%);
    --21c-card-gradient-3: linear-gradient(135deg, #263042 0%, #20D4DA 100%);
    --21c-card-gradient-4: linear-gradient(135deg, #171A1F 0%, #2563EB 100%);
}

/* Fluent Booking Overview Widgets Container */
.overview-widgets {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
    gap: 20px;
}

/* Individual Overview Widget Cards */
.overview-widget {
    position: relative;
    border-radius: 16px;
    padding: 24px;
    color: white;
    overflow: hidden;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.12);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.overview-widget:hover {
    transform: translateY(-4px);
    box-shadow: 0 12px 40px rgba(0, 0, 0, 0.18);
}

/* Widget 1: Total Bookings - Hero Gradient (Blue to Teal) */
.overview-widget:nth-child(1) {
    background: var(--21c-card-gradient-1) !important;
}

/* Widget 2: Completed Bookings - Navy to Blue Gray */
.overview-widget:nth-child(2) {
    background: var(--21c-card-gradient-2) !important;
}

/* Widget 3: Cancelled Bookings - Navy to Teal */
.overview-widget:nth-child(3) {
    background: var(--21c-card-gradient-3) !important;
}

/* Widget 4: Total Guests - Dark Charcoal to Blue */
.overview-widget:nth-child(4) {
    background: var(--21c-card-gradient-4) !important;
}

/* Widget Heading (Large Number) */
.overview-widget h1 {
    font-size: 3rem;
    font-weight: 800;
    margin: 0 0 8px 0;
    color: white !important;
    line-height: 1;
    letter-spacing: -0.02em;
}

/* Widget Label (e.g., "Total Bookings") */
.overview-widget p {
    font-size: 1rem;
    font-weight: 500;
    margin: 0 0 12px 0;
    color: rgba(255, 255, 255, 0.9) !important;
    text-transform: none;
}

/* Widget Stats/Percentage Row */
.overview-widget h3 {
    font-size: 0.85rem;
    font-weight: 400;
    margin: 0;
    color: rgba(255, 255, 255, 0.75) !important;
    display: flex;
    align-items: center;
    gap: 6px;
}

/* Stat Badge (percentage) */
.overview-widget .stat {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    background: rgba(255, 255, 255, 0.15);
    padding: 4px 10px;
    border-radius: 20px;
    font-weight: 600;
    color: white !important;
    backdrop-filter: blur(4px);
}

/* Stat Icon */
.overview-widget .stat .el-icon {
    display: inline-flex;
    width: 14px;
    height: 14px;
}

.overview-widget .stat .el-icon svg {
    width: 100%;
    height: 100%;
    fill: currentColor;
}

/* Widget Icon (Calendar/Check/X/Users) - positioned top right */
.overview-widget > .icon {
    position: absolute;
    top: 20px;
    right: 20px;
    width: 48px;
    height: 48px;
    background: rgba(255, 255, 255, 0.15);
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    backdrop-filter: blur(4px);
}

.overview-widget > .icon svg {
    width: 28px;
    height: 28px;
    fill: white;
    opacity: 0.9;
}

/* Alternative: Full Brand Gradient across all widgets (uncomment to use) */
/*
.overview-widget {
    background: var(--21c-primary-gradient) !important;
}
*/

/* Responsive adjustments */
@media (max-width: 768px) {
    .overview-widgets {
        grid-template-columns: 1fr 1fr;
        gap: 16px;
    }
    
    .overview-widget {
        padding: 20px;
    }
    
    .overview-widget h1 {
        font-size: 2.25rem;
    }
    
    .overview-widget > .icon {
        width: 40px;
        height: 40px;
        top: 16px;
        right: 16px;
    }
    
    .overview-widget > .icon svg {
        width: 24px;
        height: 24px;
    }
}

@media (max-width: 480px) {
    .overview-widgets {
        grid-template-columns: 1fr;
    }
}
